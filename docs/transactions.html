  <script>
    const API = 'http://127.0.0.1:8000';

    async function loadCats() {
      const res = await fetch(`${API}/categories/`);
      const cats = await res.json();
      const sel = document.getElementById('catSelect');
      sel.innerHTML = '<option value="">Selectâ€¦</option>';
      cats.forEach(c => {
        const o = document.createElement('option');
        o.value = c.id;
        o.textContent = c.name;
        sel.appendChild(o);
      });
    }

    async function loadTxs() {
      const res = await fetch(`${API}/transactions/`);
      const txs = await res.json();
      const list = document.getElementById('txList');
      list.innerHTML = '';
      txs.forEach(t => {
        const item = document.createElement('div');
        item.className = 'list-group-item d-flex justify-content-between align-items-center';
        item.innerHTML = `
          <div>${t.timestamp.slice(0,19).replace('T',' ')}</div>
          <div>
            <span>${t.amount}</span>
            <button class="btn btn-sm btn-danger ms-2">Delete</button>
          </div>
        `;
        item.querySelector('button').onclick = async () => {
          await fetch(`${API}/transactions/${t.id}`, { method: 'DELETE' });
          loadTxs();
        };
        list.appendChild(item);
      });
    }

    document.getElementById('txForm').onsubmit = async e => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const payload = {
        category_id: Number(fd.get('category_id')),
        amount:      Math.round(Number(fd.get('amount'))*100)
      };
      const res = await fetch(`${API}/transactions/`, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if (res.ok) {
        e.target.reset();
        loadTxs();
      } else {
        alert((await res.json()).detail);
      }
    };

    // initial
    loadCats();
    // Create a GET /transactions endpoint in your API (list all)
    loadTxs();
  </script>
