<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Low‐Budget Alerts</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <h2>Alerts ≤ 20%</h2>
  <button onclick="load()" class="btn btn-secondary mb-3">Refresh</button>
  <ul id="alist" class="list-group"></ul>

  <script>
    const API = 'http://127.0.0.1:8000';
    async function load() {
      const res = await fetch(API + '/alerts/');
      const js = await res.json();
      const ul = document.getElementById('alist');
      ul.innerHTML = '';
      if (res.ok && js.alerts.length) {
        js.alerts.forEach(a => {
          const li = document.createElement('li');
          li.className = 'list-group-item list-group-item-warning';
          li.textContent = `${a.category}: $${(a.remaining_cents/100).toFixed(2)} (${a.percent_left}%)`;
          ul.appendChild(li);
        });
      } else {
        ul.innerHTML = '<li class="list-group-item">No alerts</li>';
      }
    }
    load();
  </script>
</body>
</html>
